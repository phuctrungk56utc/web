(this["webpackJsonplearn-rtx-saga"]=this["webpackJsonplearn-rtx-saga"]||[]).push([[0],{319:function(e,t,n){},320:function(e,t,n){"use strict";n.r(t);var a=n(400),r=n(82),c=n(0),i=n.n(c),s=n(15),o=n.n(s),l=n(58),u=n(73),d=(n(198),n(33)),j=Object(d.a)(),b=n(2);var h=n(28),O=n(20);function f(e){return Boolean(localStorage.getItem("access_token"))?Object(b.jsx)(O.b,Object(h.a)({},e)):Object(b.jsx)(O.a,{to:"/login"})}var x=n(369),m=n(372),p=n(367),g=n(371),v=n(68),y=function(){return Object(l.d)()},k=l.e,w=n(37),S={isLoggedIn:!1,logging:!1,currentUser:void 0},C=Object(w.c)({name:"auth",initialState:S,reducers:{login:function(e,t){e.logging=!0},loginSuccess:function(e,t){e.isLoggedIn=!0,e.logging=!1,e.currentUser=t.payload},loginFailed:function(e,t){e.logging=!1},logout:function(e){e.isLoggedIn=!1,e.currentUser=void 0}}}),_=C.actions,L=C.reducer,F=Object(p.a)((function(e){return{root:{flexGrow:1},title:{flexGrow:1}}}));function B(){var e=F(),t=y();return Object(b.jsx)("div",{className:e.root,children:Object(b.jsx)(x.a,{position:"static",children:Object(b.jsxs)(g.a,{children:[Object(b.jsx)(v.a,{variant:"h6",className:e.title,children:"Student Management"}),Object(b.jsx)(m.a,{color:"inherit",onClick:function(){t(_.logout())},children:"Logout"})]})})})}var N=n(373),A=n(323),I=n(374),M=n(376),R=n(375),W=n(377),D=n(43),P=Object(p.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},link:{color:"inherit",textDecoration:"none","&.active > div":{backgroundColor:e.palette.action.selected}}}}));function z(){var e=P();return Object(b.jsx)("div",{className:e.root,children:Object(b.jsxs)(N.a,{component:"nav","aria-label":"main mailbox folders",children:[Object(b.jsx)(D.b,{to:"/admin/dashboard",className:e.link,children:Object(b.jsxs)(A.a,{button:!0,children:[Object(b.jsx)(I.a,{children:Object(b.jsx)(R.a,{})}),Object(b.jsx)(M.a,{primary:"Dashboard"})]})}),Object(b.jsx)(D.b,{to:"/admin/students",className:e.link,children:Object(b.jsxs)(A.a,{button:!0,children:[Object(b.jsx)(I.a,{children:Object(b.jsx)(W.a,{})}),Object(b.jsx)(M.a,{primary:"Students"})]})})]})})}var E=n(401),T=n(384),q=n(385),U=n(386),H=n(387),G=n(388),V=n(322),J=Object(p.a)((function(e){return{root:{display:"flex",flexFlow:"row nowrap",justifyContent:"space-between",alignItems:"center",padding:e.spacing(2),border:"1px solid ".concat(e.palette.divider)}}}));function $(e){var t=e.icon,n=e.label,a=e.value,r=J();return Object(b.jsxs)(V.a,{className:r.root,children:[Object(b.jsx)(E.a,{children:t}),Object(b.jsxs)(E.a,{children:[Object(b.jsx)(v.a,{variant:"h5",align:"right",children:a}),Object(b.jsx)(v.a,{variant:"caption",children:n})]})]})}var K=n(379),Q=n(383),X=n(382),Y=n(378),Z=n(380),ee=n(381),te=Object(p.a)({table:{}});function ne(e){var t=e.studentList,n=te();return Object(b.jsx)(Y.a,{children:Object(b.jsxs)(K.a,{className:n.table,size:"small","aria-label":"simple table",children:[Object(b.jsx)(Z.a,{children:Object(b.jsxs)(ee.a,{children:[Object(b.jsx)(X.a,{align:"center",children:"#"}),Object(b.jsx)(X.a,{align:"left",children:"Name"}),Object(b.jsx)(X.a,{align:"right",children:"Mark"})]})}),Object(b.jsx)(Q.a,{children:t.map((function(e,t){return Object(b.jsxs)(ee.a,{children:[Object(b.jsx)(X.a,{align:"center",children:t+1}),Object(b.jsx)(X.a,{align:"left",children:e.name}),Object(b.jsx)(X.a,{align:"right",children:e.mark})]},e.id)}))})]})})}var ae=Object(p.a)((function(e){return{root:{padding:e.spacing(2),border:"1px solid ".concat(e.palette.divider)}}}));function re(e){var t=e.title,n=e.children,a=ae();return Object(b.jsxs)(V.a,{className:a.root,children:[Object(b.jsx)(v.a,{variant:"button",children:t}),Object(b.jsx)(E.a,{mt:2,children:n})]})}var ce=Object(w.c)({name:"dashboard",initialState:{loading:!1,statistics:{maleCount:0,femaleCount:0,highMarkCount:0,lowMarkCount:0},highestStudentList:[],lowestStudentList:[],rankingByCityList:[]},reducers:{fetchData:function(e){e.loading=!0},fetchDataSuccess:function(e){e.loading=!1},fetchDataFailed:function(e){e.loading=!1},setStatistics:function(e,t){e.statistics=t.payload},setHighestStudentList:function(e,t){e.highestStudentList=t.payload},setLowestStudentList:function(e,t){e.lowestStudentList=t.payload},setRankingByCityList:function(e,t){e.rankingByCityList=t.payload}}}),ie=ce.actions,se=function(e){return e.dashboard.loading},oe=function(e){return e.dashboard.statistics},le=function(e){return e.dashboard.highestStudentList},ue=function(e){return e.dashboard.lowestStudentList},de=function(e){return e.dashboard.rankingByCityList},je=ce.reducer,be=Object(p.a)((function(e){return{root:{position:"relative",paddingTop:e.spacing(1)},loading:{position:"absolute",top:e.spacing(-1),width:"100%"}}}));function he(){var e=y(),t=k(se),n=k(oe),a=k(le),r=k(ue),i=k(de),s=be();return Object(c.useEffect)((function(){e(ie.fetchData())}),[e]),Object(b.jsxs)(E.a,{className:s.root,children:[t&&Object(b.jsx)(T.a,{className:s.loading}),Object(b.jsxs)(q.a,{container:!0,spacing:3,children:[Object(b.jsx)(q.a,{item:!0,xs:12,md:6,lg:3,children:Object(b.jsx)($,{icon:Object(b.jsx)(W.a,{fontSize:"large",color:"primary"}),label:"male",value:n.maleCount})}),Object(b.jsx)(q.a,{item:!0,xs:12,md:6,lg:3,children:Object(b.jsx)($,{icon:Object(b.jsx)(U.a,{fontSize:"large",color:"primary"}),label:"female",value:n.femaleCount})}),Object(b.jsx)(q.a,{item:!0,xs:12,md:6,lg:3,children:Object(b.jsx)($,{icon:Object(b.jsx)(H.a,{fontSize:"large",color:"primary"}),label:"mark >= 8",value:n.highMarkCount})}),Object(b.jsx)(q.a,{item:!0,xs:12,md:6,lg:3,children:Object(b.jsx)($,{icon:Object(b.jsx)(G.a,{fontSize:"large",color:"primary"}),label:"mark <= 5",value:n.lowMarkCount})})]}),Object(b.jsxs)(E.a,{mt:5,children:[Object(b.jsx)(v.a,{variant:"h4",children:"All Students"}),Object(b.jsx)(E.a,{mt:2,children:Object(b.jsxs)(q.a,{container:!0,spacing:3,children:[Object(b.jsx)(q.a,{item:!0,xs:12,md:6,lg:3,children:Object(b.jsx)(re,{title:"Student with highest mark",children:Object(b.jsx)(ne,{studentList:a})})}),Object(b.jsx)(q.a,{item:!0,xs:12,md:6,lg:3,children:Object(b.jsx)(re,{title:"Student with lowest mark",children:Object(b.jsx)(ne,{studentList:r})})})]})})]}),Object(b.jsxs)(E.a,{mt:5,children:[Object(b.jsx)(v.a,{variant:"h4",children:"Rankings by city"}),Object(b.jsx)(E.a,{mt:2,children:Object(b.jsx)(q.a,{container:!0,spacing:3,children:i.map((function(e){return Object(b.jsx)(q.a,{item:!0,xs:12,md:6,lg:3,children:Object(b.jsx)(re,{title:e.cityName,children:Object(b.jsx)(ne,{studentList:e.rankingList})})},e.cityId)}))})})]})]})}var Oe=n(95),fe=Object(w.c)({name:"city",initialState:{loading:!1,list:[]},reducers:{fetchCityList:function(e){e.loading=!0},fetchCityListSuccess:function(e,t){e.loading=!1,e.list=t.payload.data},fetchCityListFailed:function(e){e.loading=!1}}}),xe=fe.actions,me=function(e){return e.city.list},pe=Object(Oe.a)(me,(function(e){return e.reduce((function(e,t){return e[t.code]=t,e}),{})})),ge=Object(Oe.a)(me,(function(e){return e.map((function(e){return{label:e.name,value:e.code}}))})),ve=fe.reducer,ye=n(8),ke=n.n(ye),we=n(24),Se=n(22),Ce=n(394),_e=n(163),Le=n.n(_e).a.create({baseURL:"http://js-post-api.herokuapp.com/api",headers:{"Content-Type":"application/json"}});Le.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),Le.interceptors.response.use((function(e){return e.data}),(function(e){return Promise.reject(e)}));var Fe=Le,Be={getAll:function(e){return Fe.get("/students",{params:e})},getById:function(e){var t="/students/".concat(e);return Fe.get(t)},add:function(e){return Fe.post("/students",e)},update:function(e){var t="/students/".concat(e.id);return Fe.patch(t,e)},remove:function(e){var t="/students/".concat(e);return Fe.delete(t)}},Ne=n(169),Ae=n(393),Ie=n(405),Me=n(170),Re=n(389),We=n(32),De=["name","control","label"];function Pe(e){var t=e.name,n=e.control,a=e.label,r=Object(Me.a)(e,De),c=Object(We.d)({name:t,control:n}),i=c.field,s=i.value,o=i.onChange,l=i.onBlur,u=i.ref,d=c.fieldState,j=d.invalid,h=d.error;return Object(b.jsx)(Re.a,{fullWidth:!0,size:"small",margin:"normal",value:s,onChange:o,onBlur:l,label:a,variant:"outlined",inputRef:u,error:j,helperText:null===h||void 0===h?void 0:h.message,inputProps:r})}var ze=n(326),Ee=n(390),Te=n(328),qe=n(404),Ue=n(406),He=n(329);function Ge(e){var t=e.name,n=e.control,a=e.label,r=e.disabled,c=e.options,i=Object(We.d)({name:t,control:n}),s=i.field,o=s.value,l=s.onChange,u=s.onBlur,d=i.fieldState,j=d.invalid,h=d.error;return Object(b.jsxs)(ze.a,{disabled:r,margin:"normal",component:"fieldset",error:j,children:[Object(b.jsx)(Te.a,{component:"legend",children:a}),Object(b.jsx)(Ue.a,{name:t,value:o,onChange:l,onBlur:u,children:c.map((function(e){return Object(b.jsx)(Ee.a,{value:e.value,control:Object(b.jsx)(qe.a,{}),label:e.label},e.value)}))}),Object(b.jsx)(He.a,{children:null===h||void 0===h?void 0:h.message})]})}var Ve=n(331),Je=n(392),$e=n(327);function Ke(e){var t=e.name,n=e.control,a=e.label,r=e.disabled,c=e.options,i=Object(We.d)({name:t,control:n}),s=i.field,o=s.value,l=s.onChange,u=s.onBlur,d=i.fieldState,j=d.invalid,h=d.error;return Object(b.jsxs)(ze.a,{fullWidth:!0,variant:"outlined",margin:"normal",size:"small",disabled:r,error:j,children:[Object(b.jsx)($e.a,{id:"".concat(t,"_label"),children:a}),Object(b.jsx)(Ve.a,{labelId:"".concat(t,"_label"),value:o,onChange:l,onBlur:u,label:a,children:c.map((function(e){return Object(b.jsx)(Je.a,{value:e.value,children:e.label},e.value)}))}),Object(b.jsx)(He.a,{children:null===h||void 0===h?void 0:h.message})]})}var Qe=n(67),Xe=Qe.b().shape({name:Qe.c().required("Please enter name.").test("two-words","Please enter at least two words",(function(e){return!e||((null===e||void 0===e?void 0:e.split(" "))||[]).filter((function(e){return Boolean(e)})).length>=2})),age:Qe.a().positive("Please enter a positive number.").min(18,"Min is 18").max(60,"Max is 60").integer("Please enter an integer.").required("Please enter age.").typeError("Please enter a valid number."),mark:Qe.a().min(0,"Min is 0").max(10,"Max is 10").required("Please enter mark.").typeError("Please enter a valid number."),gender:Qe.c().oneOf(["male","female"],"Please select either male or female.").required("Please select gender."),city:Qe.c().required("Please select city.")});function Ye(e){var t=e.initialValues,n=e.onSubmit,a=k(ge),r=Object(c.useState)(""),i=Object(Se.a)(r,2),s=i[0],o=i[1],l=Object(We.e)({defaultValues:t,resolver:Object(Ne.a)(Xe)}),u=l.control,d=l.handleSubmit,j=l.formState.isSubmitting,h=function(){var e=Object(we.a)(ke.a.mark((function e(t){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(""),e.next=4,null===n||void 0===n?void 0:n(t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),o(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)(E.a,{maxWidth:400,children:Object(b.jsxs)("form",{onSubmit:d(h),children:[Object(b.jsx)(Pe,{name:"name",control:u,label:"Full Name"}),Object(b.jsx)(Ge,{name:"gender",control:u,label:"Gender",options:[{label:"Male",value:"male"},{label:"Female",value:"female"}]}),Object(b.jsx)(Pe,{name:"age",control:u,label:"Age",type:"number"}),Object(b.jsx)(Pe,{name:"mark",control:u,label:"Mark",type:"number"}),Array.isArray(a)&&a.length>0&&Object(b.jsx)(Ke,{name:"city",control:u,label:"City",options:a}),s&&Object(b.jsx)(Ie.a,{severity:"error",children:s}),Object(b.jsx)(E.a,{mt:3,children:Object(b.jsxs)(m.a,{type:"submit",variant:"contained",color:"primary",disabled:j,children:[j&&Object(b.jsx)(Ae.a,{size:16,color:"primary"}),"\xa0Save"]})})]})})}function Ze(){var e=Object(O.g)(),t=Object(O.h)().studentId,n=Boolean(t),a=Object(c.useState)(),r=Object(Se.a)(a,2),i=r[0],s=r[1];Object(c.useEffect)((function(){t&&Object(we.a)(ke.a.mark((function e(){var n;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Be.getById(t);case 3:n=e.sent,s(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Failed to fetch student details",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}),[t]);var o=function(){var t=Object(we.a)(ke.a.mark((function t(a){return ke.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=5;break}return t.next=3,Be.update(a);case 3:t.next=7;break;case 5:return t.next=7,Be.add(a);case 7:u.b.success("Save student successfully!"),e.push("/admin/students");case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=Object(h.a)({name:"",age:"",mark:"",gender:"male",city:""},i);return Object(b.jsxs)(E.a,{children:[Object(b.jsx)(D.a,{to:"/admin/students",children:Object(b.jsxs)(v.a,{variant:"caption",style:{display:"flex",alignItems:"center"},children:[Object(b.jsx)(Ce.a,{})," Back to student list"]})}),Object(b.jsx)(v.a,{variant:"h4",children:n?"Update student info":"Add new student"}),(!n||Boolean(i))&&Object(b.jsx)(E.a,{mt:3,children:Object(b.jsx)(Ye,{initialValues:l,onSubmit:o})})]})}var et=n(402),tt=n(332),nt=n(395);function at(e){var t=e.filter,n=e.cityList,a=e.onChange,r=e.onSearchChange,i=Object(c.useRef)();return Object(b.jsx)(E.a,{children:Object(b.jsxs)(q.a,{container:!0,spacing:3,children:[Object(b.jsx)(q.a,{item:!0,xs:12,md:6,children:Object(b.jsxs)(ze.a,{fullWidth:!0,variant:"outlined",size:"small",children:[Object(b.jsx)($e.a,{htmlFor:"searchByName",children:"Search by name"}),Object(b.jsx)(tt.a,{id:"searchByName",label:"Search by name",endAdornment:Object(b.jsx)(nt.a,{}),defaultValue:t.name_like,onChange:function(e){if(r){var n=Object(h.a)(Object(h.a)({},t),{},{name_like:e.target.value,_page:1});r(n)}},inputRef:i})]})}),Object(b.jsx)(q.a,{item:!0,xs:12,md:6,lg:3,children:Object(b.jsxs)(ze.a,{variant:"outlined",size:"small",fullWidth:!0,children:[Object(b.jsx)($e.a,{id:"filterByCity",children:"Filter by city"}),Object(b.jsxs)(Ve.a,{labelId:"filterByCity",value:t.city||"",onChange:function(e){if(a){var n=Object(h.a)(Object(h.a)({},t),{},{_page:1,city:e.target.value||void 0});a(n)}},label:"Filter by city",children:[Object(b.jsx)(Je.a,{value:"",children:Object(b.jsx)("em",{children:"All"})}),n.map((function(e){return Object(b.jsx)(Je.a,{value:e.code,children:e.name},e.code)}))]})]})}),Object(b.jsx)(q.a,{item:!0,xs:12,md:6,lg:2,children:Object(b.jsxs)(ze.a,{variant:"outlined",size:"small",fullWidth:!0,children:[Object(b.jsx)($e.a,{id:"sortBy",children:"Sort"}),Object(b.jsxs)(Ve.a,{labelId:"sortBy",value:t._sort?"".concat(t._sort,".").concat(t._order):"",onChange:function(e){if(a){var n=e.target.value.split("."),r=Object(Se.a)(n,2),c=r[0],i=r[1],s=Object(h.a)(Object(h.a)({},t),{},{_sort:c||void 0,_order:i||void 0});a(s)}},label:"Sort",children:[Object(b.jsx)(Je.a,{value:"",children:Object(b.jsx)("em",{children:"No sort"})}),Object(b.jsx)(Je.a,{value:"name.asc",children:"Name ASC"}),Object(b.jsx)(Je.a,{value:"name.desc",children:"Name DESC"}),Object(b.jsx)(Je.a,{value:"mark.asc",children:"Mark ASC"}),Object(b.jsx)(Je.a,{value:"mark.desc",children:"Mark DESC"})]})]})}),Object(b.jsx)(q.a,{item:!0,xs:12,md:6,lg:1,children:Object(b.jsx)(m.a,{variant:"outlined",color:"primary",fullWidth:!0,onClick:function(){if(a){var e=Object(h.a)(Object(h.a)({},t),{},{_page:1,_sort:void 0,_order:void 0,city:void 0,name_like:void 0});a(e),i.current&&(i.current.value="")}},children:"Clear"})})]})})}var rt=n(407),ct=n(399),it=n(397),st=n(398),ot=n(396),lt=Object(p.a)((function(e){return{table:{},edit:{marginRight:e.spacing(1)}}}));function ut(e){var t=e.studentList,n=e.cityMap,a=e.onEdit,r=e.onRemove,i=lt(),s=Object(c.useState)(!1),o=Object(Se.a)(s,2),l=o[0],u=o[1],d=Object(c.useState)(),j=Object(Se.a)(d,2),h=j[0],O=j[1],f=function(){u(!1)};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Y.a,{component:V.a,children:Object(b.jsxs)(K.a,{className:i.table,size:"small","aria-label":"simple table",children:[Object(b.jsx)(Z.a,{children:Object(b.jsxs)(ee.a,{children:[Object(b.jsx)(X.a,{children:"ID"}),Object(b.jsx)(X.a,{children:"Name"}),Object(b.jsx)(X.a,{children:"Gender"}),Object(b.jsx)(X.a,{children:"Mark"}),Object(b.jsx)(X.a,{children:"City"}),Object(b.jsx)(X.a,{align:"right",children:"Actions"})]})}),Object(b.jsx)(Q.a,{children:t.map((function(e){var t,r,c;return Object(b.jsxs)(ee.a,{children:[Object(b.jsx)(X.a,{width:310,children:e.id}),Object(b.jsx)(X.a,{children:e.name}),Object(b.jsx)(X.a,{children:(c=e.gender,c?"".concat(c[0].toUpperCase()).concat(c.slice(1)):"")}),Object(b.jsx)(X.a,{children:Object(b.jsx)(E.a,{color:(r=e.mark,r>=8?"green":r>=4?"goldenrod":"red"),fontWeight:"bold",children:e.mark})}),Object(b.jsx)(X.a,{children:null===(t=n[e.city])||void 0===t?void 0:t.name}),Object(b.jsxs)(X.a,{align:"right",children:[Object(b.jsx)(m.a,{size:"small",className:i.edit,color:"primary",onClick:function(){return null===a||void 0===a?void 0:a(e)},children:"Edit"}),Object(b.jsx)(m.a,{size:"small",color:"secondary",onClick:function(){return function(e){O(e),u(!0)}(e)},children:"Remove"})]})]},e.id)}))})]})}),Object(b.jsxs)(rt.a,{open:l,onClose:f,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(b.jsx)(ot.a,{id:"alert-dialog-title",children:"Remove a student?"}),Object(b.jsx)(it.a,{children:Object(b.jsxs)(st.a,{id:"alert-dialog-description",children:['Are you sure to remove student named "',null===h||void 0===h?void 0:h.name,'". ',Object(b.jsx)("br",{}),"This action can't be undo."]})}),Object(b.jsxs)(ct.a,{children:[Object(b.jsx)(m.a,{onClick:f,color:"default",variant:"outlined",children:"Cancel"}),Object(b.jsx)(m.a,{onClick:function(){return e=h,null===r||void 0===r||r(e),void u(!1);var e},color:"secondary",variant:"contained",autoFocus:!0,children:"Remove"})]})]})]})}var dt=Object(w.c)({name:"student",initialState:{loading:!1,list:[],filter:{_page:1,_limit:15},pagination:{_page:1,_limit:15,_totalRows:15}},reducers:{fetchStudentList:function(e,t){e.loading=!0},fetchStudentListSuccess:function(e,t){e.list=t.payload.data,e.pagination=t.payload.pagination,e.loading=!1},fetchStudentListFailed:function(e){e.loading=!1},setFilter:function(e,t){e.filter=t.payload},setFilterWithDebounce:function(e,t){}}}),jt=dt.actions,bt=function(e){return e.student.list},ht=function(e){return e.student.loading},Ot=function(e){return e.student.filter},ft=function(e){return e.student.pagination},xt=dt.reducer,mt=Object(p.a)((function(e){return{root:{position:"relative",paddingTop:e.spacing(1)},titleContainer:{display:"flex",flexFlow:"row nowrap",justifyContent:"space-between",alignItems:"center",marginBottom:e.spacing(4)},loading:{position:"absolute",top:e.spacing(-1),width:"100%"}}}));function pt(){var e=Object(O.i)(),t=Object(O.g)(),n=k(bt),a=k(ft),r=k(Ot),i=k(ht),s=k(pe),o=k(me),l=y(),d=mt();Object(c.useEffect)((function(){l(jt.fetchStudentList(r))}),[l,r]);var j=function(){var e=Object(we.a)(ke.a.mark((function e(t){var n;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Be.remove((null===t||void 0===t?void 0:t.id)||"");case 3:u.b.success("Remove student successfully!"),n=Object(h.a)({},r),l(jt.setFilter(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Failed to fetch student",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var n=Object(we.a)(ke.a.mark((function n(a){return ke.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.push("".concat(e.url,"/").concat(a.id));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(b.jsxs)(E.a,{className:d.root,children:[i&&Object(b.jsx)(T.a,{className:d.loading}),Object(b.jsxs)(E.a,{className:d.titleContainer,children:[Object(b.jsx)(v.a,{variant:"h4",children:"Students"}),Object(b.jsx)(D.a,{to:"".concat(e.url,"/add"),style:{textDecoration:"none"},children:Object(b.jsx)(m.a,{variant:"contained",color:"primary",children:"Add new student"})})]}),Object(b.jsx)(E.a,{mb:3,children:Object(b.jsx)(at,{filter:r,cityList:o,onChange:function(e){l(jt.setFilter(e))},onSearchChange:function(e){l(jt.setFilterWithDebounce(e))}})}),Object(b.jsx)(ut,{studentList:n,cityMap:s,onEdit:f,onRemove:j}),Object(b.jsx)(E.a,{my:2,display:"flex",justifyContent:"center",children:Object(b.jsx)(et.a,{color:"primary",count:Math.ceil(a._totalRows/a._limit),page:null===a||void 0===a?void 0:a._page,onChange:function(e,t){l(jt.setFilter(Object(h.a)(Object(h.a)({},r),{},{_page:t})))}})})]})}function gt(){var e=Object(O.i)(),t=y();return Object(c.useEffect)((function(){t(xe.fetchCityList())}),[t]),Object(b.jsxs)(O.d,{children:[Object(b.jsx)(O.b,{path:e.path,exact:!0,children:Object(b.jsx)(pt,{})}),Object(b.jsx)(O.b,{path:"".concat(e.path,"/add"),children:Object(b.jsx)(Ze,{})}),Object(b.jsx)(O.b,{path:"".concat(e.path,"/:studentId"),children:Object(b.jsx)(Ze,{})})]})}var vt=Object(p.a)((function(e){return{root:{display:"grid",gridTemplateRows:"auto 1fr",gridTemplateColumns:"240px 1fr",gridTemplateAreas:'"header header" "sidebar main"',minHeight:"100vh"},header:{gridArea:"header"},sidebar:{gridArea:"sidebar",borderRight:"1px solid ".concat(e.palette.divider),backgroundColor:e.palette.background.paper},main:{gridArea:"main",backgroundColor:e.palette.background.paper,padding:e.spacing(2,3)}}}));function yt(){var e=vt();return Object(b.jsxs)(E.a,{className:e.root,children:[Object(b.jsx)(E.a,{className:e.header,children:Object(b.jsx)(B,{})}),Object(b.jsx)(E.a,{className:e.sidebar,children:Object(b.jsx)(z,{})}),Object(b.jsx)(E.a,{className:e.main,children:Object(b.jsxs)(O.d,{children:[Object(b.jsx)(O.b,{path:"/admin/dashboard",children:Object(b.jsx)(he,{})}),Object(b.jsx)(O.b,{path:"/admin/students",children:Object(b.jsx)(gt,{})})]})})]})}var kt=Object(p.a)((function(e){return{root:{display:"flex",flexFlow:"row nowrap",justifyContent:"center",alignItems:"center",minHeight:"100vh"},box:{padding:e.spacing(3)}}}));function wt(){var e=kt(),t=y(),n=k((function(e){return e.auth.logging}));return Object(b.jsx)("div",{className:e.root,children:Object(b.jsxs)(V.a,{elevation:1,className:e.box,children:[Object(b.jsx)(v.a,{variant:"h5",component:"h1",children:"Student Management"}),Object(b.jsx)(E.a,{mt:4,children:Object(b.jsxs)(m.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:function(){t(_.login({username:"",password:""}))},children:[n&&Object(b.jsx)(Ae.a,{size:20,color:"secondary"})," \xa0 Fake Login"]})})]})})}var St=function(){return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(O.d,{children:[Object(b.jsx)(O.b,{path:"/login",children:Object(b.jsx)(wt,{})}),Object(b.jsx)(f,{path:"/admin",children:Object(b.jsx)(yt,{})}),Object(b.jsx)(O.b,{children:Object(b.jsx)(wt,{})})]})})},Ct=n(41),_t=n(158),Lt=n(168);function Ft(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){return setTimeout((function(){return t({data:e})}),500)}))}var Bt=Object(w.b)("counter/fetchCount",function(){var e=Object(we.a)(ke.a.mark((function e(t){var n;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Nt=Object(w.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload},incrementSaga:function(e,t){e.status="loading"},incrementSagaSuccess:function(e,t){e.status="idle",e.value+=t.payload}},extraReducers:function(e){e.addCase(Bt.pending,(function(e){e.status="loading"})).addCase(Bt.fulfilled,(function(e,t){e.status="idle",e.value+=t.payload}))}}),At=Nt.actions,It=(At.increment,At.decrement,At.incrementByAmount,At.incrementSaga),Mt=At.incrementSagaSuccess,Rt=Nt.reducer,Wt=n(29),Dt=n(11),Pt=ke.a.mark(qt),zt=ke.a.mark(Ut),Et=ke.a.mark(Ht),Tt=ke.a.mark(Gt);function qt(e){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Dt.d)(1e3);case 3:return localStorage.setItem("access_token","fake_token"),e.next=6,Object(Dt.f)(_.loginSuccess({id:1,name:"Easy Frontend"}));case 6:return e.next=8,Object(Dt.f)(Object(Wt.d)("/admin/dashboard"));case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,Object(Dt.f)(_.loginFailed(e.t0.message));case 14:case"end":return e.stop()}}),Pt,null,[[0,10]])}function Ut(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Dt.d)(500);case 2:return localStorage.removeItem("access_token"),e.next=5,Object(Dt.f)(Object(Wt.d)("/login"));case 5:case"end":return e.stop()}}),zt)}function Ht(){var e;return ke.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Boolean(localStorage.getItem("access_token"))){t.next=8;break}return t.next=5,Object(Dt.g)(_.login.type);case 5:return e=t.sent,t.next=8,Object(Dt.e)(qt,e.payload);case 8:return t.next=10,Object(Dt.g)(_.logout.type);case 10:return t.next=12,Object(Dt.b)(Ut);case 12:t.next=0;break;case 14:case"end":return t.stop()}}),Et)}function Gt(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Dt.e)(Ht);case 2:case"end":return e.stop()}}),Tt)}var Vt={getAll:function(){return Fe.get("/cities",{params:{_page:1,_limit:10}})}},Jt=ke.a.mark(Kt),$t=ke.a.mark(Qt);function Kt(){var e;return ke.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Dt.b)(Vt.getAll);case 3:return e=t.sent,t.next=6,Object(Dt.f)(xe.fetchCityListSuccess(e));case 6:t.next=13;break;case 8:return t.prev=8,t.t0=t.catch(0),console.log("Failed to fetch city list",t.t0),t.next=13,Object(Dt.f)(xe.fetchCityListFailed());case 13:case"end":return t.stop()}}),Jt,null,[[0,8]])}function Qt(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Dt.h)(xe.fetchCityList.type,Kt);case 2:case"end":return e.stop()}}),$t)}var Xt=n(74),Yt=ke.a.mark(en),Zt=ke.a.mark(tn);function en(e){return ke.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Waiting 1s"),t.next=3,Object(Xt.d)(1e3);case 3:return console.log("Waiting done, dispatch action"),t.next=6,Object(Xt.f)(Mt(e.payload));case 6:case"end":return t.stop()}}),Yt)}function tn(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("counter saga"),e.next=3,Object(Xt.h)(It.toString(),en);case 3:case"end":return e.stop()}}),Zt)}var nn=ke.a.mark(ln),an=ke.a.mark(un),rn=ke.a.mark(dn),cn=ke.a.mark(jn),sn=ke.a.mark(bn),on=ke.a.mark(hn);function ln(){var e,t,n,a,r,c,i;return ke.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(Dt.a)([Object(Dt.b)(Be.getAll,{_page:1,_limit:1,gender:"male"}),Object(Dt.b)(Be.getAll,{_page:1,_limit:1,gender:"female"}),Object(Dt.b)(Be.getAll,{_page:1,_limit:1,mark_gte:8}),Object(Dt.b)(Be.getAll,{_page:1,_limit:1,mark_lte:5})]);case 2:return e=s.sent,t=e.map((function(e){return e.pagination._totalRows})),n=Object(Se.a)(t,4),a=n[0],r=n[1],c=n[2],i=n[3],s.next=7,Object(Dt.f)(ie.setStatistics({maleCount:a,femaleCount:r,highMarkCount:c,lowMarkCount:i}));case 7:case"end":return s.stop()}}),nn)}function un(){var e,t;return ke.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Dt.b)(Be.getAll,{_page:1,_limit:5,_sort:"mark",_order:"desc"});case 2:return e=n.sent,t=e.data,n.next=6,Object(Dt.f)(ie.setHighestStudentList(t));case 6:case"end":return n.stop()}}),an)}function dn(){var e,t;return ke.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Dt.b)(Be.getAll,{_page:1,_limit:5,_sort:"mark",_order:"asc"});case 2:return e=n.sent,t=e.data,n.next=6,Object(Dt.f)(ie.setLowestStudentList(t));case 6:case"end":return n.stop()}}),rn)}function jn(){var e,t,n,a,r;return ke.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(Dt.b)(Vt.getAll);case 2:return e=c.sent,t=e.data,n=t.map((function(e){return Object(Dt.b)(Be.getAll,{_page:1,_limit:5,_sort:"mark",_order:"desc",city:e.code})})),c.next=7,Object(Dt.a)(n);case 7:return a=c.sent,r=a.map((function(e,n){return{cityId:t[n].code,cityName:t[n].name,rankingList:e.data}})),c.next=11,Object(Dt.f)(ie.setRankingByCityList(r));case 11:case"end":return c.stop()}}),cn)}function bn(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Dt.a)([Object(Dt.b)(ln),Object(Dt.b)(un),Object(Dt.b)(dn),Object(Dt.b)(jn)]);case 3:return e.next=5,Object(Dt.f)(ie.fetchDataSuccess());case 5:e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),console.log("Failed to fetch dashboard data",e.t0),e.next=12,Object(Dt.f)(ie.fetchDataFailed());case 12:case"end":return e.stop()}}),sn,null,[[0,7]])}function hn(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Dt.h)(ie.fetchData.type,bn);case 2:case"end":return e.stop()}}),on)}var On=ke.a.mark(mn),fn=ke.a.mark(pn),xn=ke.a.mark(gn);function mn(e){var t;return ke.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(Dt.b)(Be.getAll,e.payload);case 3:return t=n.sent,n.next=6,Object(Dt.f)(jt.fetchStudentListSuccess(t));case 6:n.next=13;break;case 8:return n.prev=8,n.t0=n.catch(0),console.log("Failed to fetch student list",n.t0),n.next=13,Object(Dt.f)(jt.fetchStudentListFailed());case 13:case"end":return n.stop()}}),On,null,[[0,8]])}function pn(e){return ke.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Dt.f)(jt.setFilter(e.payload));case 2:case"end":return t.stop()}}),fn)}function gn(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Dt.h)(jt.fetchStudentList,mn);case 2:return e.next=4,Object(Dt.c)(500,jt.setFilterWithDebounce.type,pn);case 4:case"end":return e.stop()}}),xn)}var vn=ke.a.mark(yn);function yn(){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Dt.a)([tn(),Gt(),hn(),gn(),Qt()]);case 2:case"end":return e.stop()}}),vn)}var kn=Object(Ct.b)({router:Object(r.b)(j),counter:Rt,auth:L,dashboard:je,student:xt,city:ve}),wn=Object(Lt.a)(),Sn=Object(w.a)({reducer:kn,middleware:function(e){return e().concat(wn,Object(_t.a)(j))}});wn.run(yn);n(319),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsxs)(l.a,{store:Sn,children:[Object(b.jsxs)(r.a,{history:j,children:[Object(b.jsx)(a.a,{}),Object(b.jsx)(St,{})]}),Object(b.jsx)(u.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[320,1,2]]]);
//# sourceMappingURL=main.a5f6fbd2.chunk.js.map